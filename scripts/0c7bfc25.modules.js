!function(a,b,c){"use strict";b.module("ngResource",["ng"]).factory("$resource",["$http","$parse",function(a,d){function e(a){return f(a,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function f(a,b){return encodeURIComponent(a).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,b?"%20":"+")}function g(a,b){this.template=a+="#",this.defaults=b||{};var c=this.urlParams={};k(a.split(/\W/),function(b){b&&new RegExp("(^|[^\\\\]):"+b+"\\W").test(a)&&(c[b]=!0)}),this.template=a.replace(/\\:/g,":")}function h(d,e,f){function p(a,b){var c={};return b=l({},e,b),k(b,function(b,d){c[d]=b.charAt&&"@"==b.charAt(0)?o(a,b.substr(1)):b}),c}function q(a){m(a||{},this)}var r=new g(d);return f=l({},i,f),k(f,function(d,e){d.method=b.uppercase(d.method);var f="POST"==d.method||"PUT"==d.method||"PATCH"==d.method;q[e]=function(b,c,e,g){var h,i={},o=j,s=null;switch(arguments.length){case 4:s=g,o=e;case 3:case 2:if(!n(c)){i=b,h=c,o=e;break}if(n(b)){o=b,s=c;break}o=c,s=e;case 1:n(b)?o=b:f?h=b:i=b;break;case 0:break;default:throw"Expected between 0-4 arguments [params, data, success, error], got "+arguments.length+" arguments."}var t=this instanceof q?this:d.isArray?[]:new q(h);return a({method:d.method,url:r.url(l({},p(h,d.params||{}),i)),data:h}).then(function(a){var b=a.data;b&&(d.isArray?(t.length=0,k(b,function(a){t.push(new q(a))})):m(b,t)),(o||j)(t,a.headers)},s),t},q.prototype["$"+e]=function(a,b,d){var g,h=p(this),i=j;switch(arguments.length){case 3:h=a,i=b,g=d;break;case 2:case 1:n(a)?(i=a,g=b):(h=a,i=b||j);case 0:break;default:throw"Expected between 1-3 arguments [params, success, error], got "+arguments.length+" arguments."}var k=f?this:c;q[e].call(this,h,k,i,g)}}),q.bind=function(a){return h(d,l({},e,a),f)},q}var i={get:{method:"GET"},save:{method:"POST"},query:{method:"GET",isArray:!0},remove:{method:"DELETE"},"delete":{method:"DELETE"}},j=b.noop,k=b.forEach,l=b.extend,m=b.copy,n=b.isFunction,o=function(a,b){return d(b)(a)};return g.prototype={url:function(a){var c,d,g=this,h=this.template;a=a||{},k(this.urlParams,function(f,i){c=a.hasOwnProperty(i)?a[i]:g.defaults[i],b.isDefined(c)&&null!==c?(d=e(c),h=h.replace(new RegExp(":"+i+"(\\W)","g"),d+"$1")):h=h.replace(new RegExp("(/?):"+i+"(\\W)","g"),function(a,b,c){return"/"==c.charAt(0)?c:b+c})}),h=h.replace(/\/?#$/,"");var i=[];return k(a,function(a,b){g.urlParams[b]||i.push(f(b)+"="+f(a))}),i.sort(),h=h.replace(/\/*$/,""),h+(i.length?"?"+i.join("&"):"")}},h}])}(window,window.angular),function(a,b,c){"use strict";b.module("ngCookies",["ng"]).factory("$cookies",["$rootScope","$browser",function(a,d){function e(){var a,e,f,i;for(a in h)k(g[a])&&d.cookies(a,c);for(a in g)e=g[a],b.isString(e)?e!==h[a]&&(d.cookies(a,e),i=!0):b.isDefined(h[a])?g[a]=h[a]:delete g[a];if(i){i=!1,f=d.cookies();for(a in g)g[a]!==f[a]&&(k(f[a])?delete g[a]:g[a]=f[a],i=!0)}}var f,g={},h={},i=!1,j=b.copy,k=b.isUndefined;return d.addPollFn(function(){var b=d.cookies();f!=b&&(f=b,j(b,h),j(b,g),i&&a.$apply())})(),i=!0,a.$watch(e),g}]).factory("$cookieStore",["$cookies",function(a){return{get:function(c){var d=a[c];return d?b.fromJson(d):d},put:function(c,d){a[c]=b.toJson(d)},remove:function(b){delete a[b]}}}])}(window,window.angular),function(a,b){"use strict";function c(a){var b,c={},d=a.split(",");for(b=0;b<d.length;b++)c[d[b]]=!0;return c}function d(a,c){function d(a,d,g,h){if(d=b.lowercase(d),v[d])for(;q.last()&&w[q.last()];)f("",q.last());u[d]&&q.last()==d&&f("",d),h=r[d]||!!h,h||q.push(d);var i={};g.replace(k,function(a,b,c,d,f){var g=c||d||f||"";i[b]=e(g)}),c.start&&c.start(d,i,h)}function f(a,d){var e,f=0;if(d=b.lowercase(d))for(f=q.length-1;f>=0&&q[f]!=d;f--);if(f>=0){for(e=q.length-1;e>=f;e--)c.end&&c.end(q[e]);q.length=f}}var g,h,p,q=[],s=a;for(q.last=function(){return q[q.length-1]};a;){if(h=!0,q.last()&&x[q.last()])a=a.replace(new RegExp("(.*)<\\s*\\/\\s*"+q.last()+"[^>]*>","i"),function(a,b){return b=b.replace(n,"$1").replace(o,"$1"),c.chars&&c.chars(e(b)),""}),f("",q.last());else if(0===a.indexOf("<!--")?(g=a.indexOf("-->"),g>=0&&(c.comment&&c.comment(a.substring(4,g)),a=a.substring(g+3),h=!1)):m.test(a)?(p=a.match(j),p&&(a=a.substring(p[0].length),p[0].replace(j,f),h=!1)):l.test(a)&&(p=a.match(i),p&&(a=a.substring(p[0].length),p[0].replace(i,d),h=!1)),h){g=a.indexOf("<");var t=0>g?a:a.substring(0,g);a=0>g?"":a.substring(g),c.chars&&c.chars(e(t))}if(a==s)throw"Parse Error: "+a;s=a}f()}function e(a){return B.innerHTML=a.replace(/</g,"&lt;"),B.innerText||B.textContent||""}function f(a){return a.replace(/&/g,"&amp;").replace(q,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function g(a){var c=!1,d=b.bind(a,a.push);return{start:function(a,e,g){a=b.lowercase(a),!c&&x[a]&&(c=a),c||1!=y[a]||(d("<"),d(a),b.forEach(e,function(a,c){var e=b.lowercase(c);1!=A[e]||z[e]===!0&&!a.match(p)||(d(" "),d(c),d('="'),d(f(a)),d('"'))}),d(g?"/>":">"))},end:function(a){a=b.lowercase(a),c||1!=y[a]||(d("</"),d(a),d(">")),a==c&&(c=!1)},chars:function(a){c||d(f(a))}}}var h=function(a){var b=[];return d(a,g(b)),b.join("")},i=/^<\s*([\w:-]+)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*>/,j=/^<\s*\/\s*([\w:-]+)[^>]*>/,k=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,l=/^</,m=/^<\s*\//,n=/<!--(.*?)-->/g,o=/<!\[CDATA\[(.*?)]]>/g,p=/^((ftp|https?):\/\/|mailto:|#)/i,q=/([^\#-~| |!])/g,r=c("area,br,col,hr,img,wbr"),s=c("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),t=c("rp,rt"),u=b.extend({},t,s),v=b.extend({},s,c("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul")),w=b.extend({},t,c("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),x=c("script,style"),y=b.extend({},r,v,w,u),z=c("background,cite,href,longdesc,src,usemap"),A=b.extend({},z,c("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,span,start,summary,target,title,type,valign,value,vspace,width")),B=document.createElement("pre");b.module("ngSanitize",[]).value("$sanitize",h),b.module("ngSanitize").directive("ngBindHtml",["$sanitize",function(a){return function(b,c,d){c.addClass("ng-binding").data("$binding",d.ngBindHtml),b.$watch(d.ngBindHtml,function(b){b=a(b),c.html(b||"")})}}]),b.module("ngSanitize").filter("linky",function(){var a=/((ftp|https?):\/\/|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s\.\;\,\(\)\{\}\<\>]/,b=/^mailto:/;return function(c){if(!c)return c;for(var d,e,f,h=c,i=[],j=g(i);d=h.match(a);)e=d[0],d[2]==d[3]&&(e="mailto:"+e),f=d.index,j.chars(h.substr(0,f)),j.start("a",{href:e}),j.chars(d[0].replace(b,"")),j.end("a"),h=h.substring(f+d[0].length);return j.chars(h),i.join("")}})}(window,window.angular);var leafletDirective=angular.module("leaflet-directive",[]);leafletDirective.directive("leaflet",["$http","$log","$parse","$rootScope",function(a,b,c,d){var e={maxZoom:14,minZoom:1,doubleClickZoom:!0,scrollWheelZoom:!0,tileLayer:"http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",tileLayerOptions:{attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'},icon:{url:"http://cdn.leafletjs.com/leaflet-0.5.1/images/marker-icon.png",retinaUrl:"http://cdn.leafletjs.com/leaflet-0.5.1/images/marker-icon@2x.png",size:[25,41],anchor:[12,40],popup:[0,-40],shadow:{url:"http://cdn.leafletjs.com/leaflet-0.5.1/images/marker-shadow.png",retinaUrl:"http://cdn.leafletjs.com/leaflet-0.5.1/images/marker-shadow.png",size:[41,41],anchor:[12,40]}},path:{weight:10,opacity:1,color:"#0000ff"}},f=L.Icon.extend({options:{iconUrl:e.icon.url,iconRetinaUrl:e.icon.retinaUrl,iconSize:e.icon.size,iconAnchor:e.icon.anchor,popupAnchor:e.icon.popup,shadowUrl:e.icon.shadow.url,shadowRetinaUrl:e.icon.shadow.retinaUrl,shadowSize:e.icon.shadow.size,shadowAnchor:e.icon.shadow.anchor}}),g='Add testing="testing" to <leaflet> tag to inspect this object';return{restrict:"E",replace:!0,transclude:!0,scope:{center:"=center",maxBounds:"=maxbounds",bounds:"=bounds",marker:"=marker",markers:"=markers",legend:"=legend",geojson:"=geojson",defaults:"=defaults",paths:"=paths",tiles:"=tiles",events:"=events",layers:"=layers"},template:'<div class="angular-leaflet-map"></div>',link:function(a,h,i){function j(){var b=a.$root.$$phase;return!("$apply"===b||"$digest"===b)}function k(b){j()?a.$apply(b):a.$eval(b)}function l(){function a(a){return function(b){var c="leafletDirectiveMap."+a;k(function(){d.$broadcast(c,{leafletEvent:b})})}}for(var b=["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","contextmenu","focus","blur","preclick","load","unload","viewreset","movestart","move","moveend","dragstart","drag","dragend","zoomstart","zoomend","zoomlevelschange","resize","autopanstart","layeradd","layerremove","baselayerchange","overlayadd","overlayremove","locationfound","locationerror","popupopen","popupclose"],c=0;c<b.length;c++){var e=b[c];H.on(e,a(e),{eventName:e})}}function m(){if("object"!=typeof a.events)return!1;for(var b in a.events)H.on(b,a.events[b])}function n(){if(void 0===a.layers||null===a.layers)s();else{if(void 0===a.layers.baselayers||null===a.layers.baselayers||"object"!=typeof a.layers.baselayers)return b.error("[AngularJS - Leaflet] At least one baselayer has to be defined"),a.leaflet.layers=i.testing?I:g,void 0;if(Object.keys(a.layers.baselayers).length<=0)return b.error("[AngularJS - Leaflet] At least one baselayer has to be defined"),a.leaflet.layers=i.testing?I:g,void 0;I={},I.baselayers={},I.controls={},I.controls.layers=(new L.control.layers).addTo(H);var c=!1;for(var d in a.layers.baselayers){var e=o(a.layers.baselayers[d]);null!==e&&(I.baselayers[d]=e,a.layers.baselayers[d].top===!0&&(H.addLayer(I.baselayers[d]),c=!0),I.controls.layers.addBaseLayer(I.baselayers[d],a.layers.baselayers[d].name))}!c&&Object.keys(I.baselayers).length>0&&H.addLayer(I.baselayers[Object.keys(a.layers.baselayers)[0]]),I.overlays={};for(d in a.layers.overlays){var f=o(a.layers.overlays[d]);null!==f&&(I.overlays[d]=f,a.layers.overlays[d].visible===!0&&H.addLayer(I.overlays[d]),I.controls.layers.addOverlay(I.overlays[d],a.layers.overlays[d].name))}a.$watch("layers.baselayers",function(c){var d=!1;for(var e in I.baselayers)void 0===c[e]&&(I.controls.layers.removeLayer(I.baselayers[e]),H.hasLayer(I.baselayers[e])&&H.removeLayer(I.baselayers[e]),delete I.baselayers[e],d=!0);for(var f in c)if(void 0===I.baselayers[f]){var g=o(c[f]);null!==g&&(I.baselayers[f]=g,c[f].top===!0&&H.addLayer(I.baselayers[f]),I.controls.layers.addBaseLayer(I.baselayers[f],c[f].name))}if(Object.keys(I.baselayers).length<=0)b.error("[AngularJS - Leaflet] At least one baselayer has to be defined");else{var h=!1;for(var i in I.baselayers)if(H.hasLayer(I.baselayers[i])){h=!0;break}h||H.addLayer(I.baselayers[Object.keys(a.layers.baselayers)[0]])}},!0),a.$watch("layers.overlays",function(a){for(var b in I.overlays)void 0===a[b]&&(I.controls.layers.removeLayer(I.overlays[b]),H.hasLayer(I.overlays[b])&&H.removeLayer(I.overlays[b]),delete I.overlays[b]);for(var c in a)if(void 0===I.overlays[c]){var d=o(a[c]);null!==d&&(I.overlays[c]=d,I.controls.layers.addOverlay(I.overlays[c],a[c].name),a[c].visible===!0&&H.addLayer(I.overlays[c]))}},!0)}a.leaflet.layers=i.testing?I:g}function o(a){if(void 0===a.type||null===a.type||"string"!=typeof a.type)return b.error("[AngularJS - Leaflet] A base layer must have a type"),null;if("xyz"!==a.type&&"wms"!==a.type)return b.error('[AngularJS - Leaflet] A base layer must have a valid type: "tiles-xyz, "'),null;if(!("xyz"!==a.type&&"wms"!==a.type||void 0!==a.url&&null!==a.url&&"string"==typeof a.url))return b.error("[AngularJS - Leaflet] A base layer must have an url"),null;if(void 0===a.name||null===a.name||"string"!=typeof a.name)return b.error("[AngularJS - Leaflet] A base layer must have a name"),null;(void 0===a.layerParams||null===a.layerParams||"object"!=typeof a.layerParams)&&(a.layerParams={}),(void 0===a.layerOptions||null===a.layerOptions||"object"!=typeof a.layerOptions)&&(a.layerOptions={});var c=null;for(var d in a.layerParams)a.layerOptions[d]=a.layerParams[d];switch(a.type){case"xyz":c=p(a.url,a.layerOptions);break;case"wms":c=q(a.url,a.layerOptions);break;case"group":c=r();break;default:c=null}return c}function p(a,b){var c=L.tileLayer(a,b);return c}function q(a,b){var c=L.tileLayer.wms(a,b);return c}function r(){var a=L.layerGroup();return a}function s(){var b,c;if(a.leaflet.tileLayer=i.defaults&&a.defaults&&a.defaults.tileLayer?a.defaults.tileLayer:e.tileLayer,a.defaults&&a.defaults.tileLayerOptions)for(c in a.defaults.tileLayerOptions)e.tileLayerOptions[c]=a.defaults.tileLayerOptions[c];if(i.tiles){if(a.tiles&&a.tiles.url&&(a.leaflet.tileLayer=a.tiles.url),a.tiles&&a.tiles.options)for(c in a.tiles.options)e.tileLayerOptions[c]=a.tiles.options[c];a.$watch("tiles.url",function(a){a&&b.setUrl(a)})}b=L.tileLayer(a.leaflet.tileLayer,e.tileLayerOptions),b.addTo(H),a.leaflet.tileLayerObj=i.testing?b:g}function t(){if(a.legend)if(a.legend.colors&&a.legend.labels&&a.legend.colors.length===a.legend.labels.length){var c=a.legend.position||"bottomright",d=L.control({position:c});d.onAdd=function(){for(var b=L.DomUtil.create("div","info legend"),c=0;c<a.legend.colors.length;c++)b.innerHTML+='<i style="background:'+a.legend.colors[c]+'"></i> '+a.legend.labels[c]+"<br />";return b},d.addTo(H)}else b.warn("[AngularJS - Leaflet] legend.colors and legend.labels must be set.")}function u(){a.maxBounds&&a.maxBounds.southWest&&a.maxBounds.southWest.lat&&a.maxBounds.southWest.lng&&a.maxBounds.northEast&&a.maxBounds.northEast.lat&&a.maxBounds.northEast.lng&&(H.setMaxBounds(new L.LatLngBounds(new L.LatLng(a.maxBounds.southWest.lat,a.maxBounds.southWest.lng),new L.LatLng(a.maxBounds.northEast.lat,a.maxBounds.northEast.lng))),a.$watch("maxBounds",function(a){a.southWest&&a.northEast&&a.southWest.lat&&a.southWest.lng&&a.northEast.lat&&a.northEast.lng&&H.setMaxBounds(new L.LatLngBounds(new L.LatLng(a.southWest.lat,a.southWest.lng),new L.LatLng(a.northEast.lat,a.northEast.lng)))}))}function v(a){if(a){var b=a.southWest,c=a.northEast;if(b&&c&&b.lat&&b.lng&&c.lat&&c.lng){var d=new L.LatLng(b.lat,b.lng),e=new L.LatLng(c.lat,c.lng);H.fitBounds(new L.LatLngBounds(d,e))}}}function w(){a.bounds&&a.$watch("bounds",function(a){v(a)})}function x(){if(!i.center)return b.warn("[AngularJS - Leaflet] 'center' is undefined in the current scope, did you forget to initialize it?"),H.setView([0,0],1),void 0;var d={lat:c("center.lat"),lng:c("center.lng"),zoom:c("center.zoom")};a.$watch("center",function(b){b&&(void 0!==b.lat&&void 0!==b.lng&&void 0!==b.zoom?H.setView([b.lat,b.lng],b.zoom):b.autoDiscover===!0&&H.locate({setView:!0,maxZoom:a.leaflet.maxZoom}))},!0),H.on("moveend",function(){k(function(a){d&&(d.lat.assign(a,H.getCenter().lat),d.lng.assign(a,H.getCenter().lng),d.zoom.assign(a,H.getZoom()))})})}function y(){a.$watch("geojson",function(b){if(b&&(a.leaflet.geojson&&H.removeLayer(a.leaflet.geojson),b.hasOwnProperty("data"))){var c=a.geojson.resetStyleOnMouseout;a.leaflet.geojson=L.geoJson(a.geojson.data,{style:a.geojson.style,onEachFeature:function(e,f){f.on({mouseover:function(a){k(function(){b.selected=e,d.$broadcast("leafletDirectiveMap.geojsonMouseover",a)})},mouseout:function(e){c&&a.leaflet.geojson.resetStyle(e.target),k(function(){b.selected=void 0,d.$broadcast("leafletDirectiveMap.geojsonMouseout",e)})},click:function(a){k(function(){d.$broadcast("leafletDirectiveMap.geojsonClick",b.selected,a)})}})}}).addTo(H)}})}function z(){var b;a.marker&&(b=B("marker",a.marker,H),a.leaflet.marker=i.testing?b:g,b.on("click",function(){k(function(){d.$broadcast("leafletDirectiveMainMarkerClick")})}))}function A(){var b={};if(a.leaflet.markers=i.testing?b:g,a.markers){for(var c in a.markers)b[c]=B("markers."+c,a.markers[c],H);a.$watch("markers",function(a){for(var c in b)void 0===a[c]&&delete b[c];for(var d in a)void 0===b[d]&&(b[d]=B("markers."+d,a[d],H))},!0)}}function B(c,e,g){function h(a){return function(b){var f="leafletDirectiveMarker."+a,g=c.replace("markers.","");"click"===a?k(function(){d.$broadcast("leafletDirectiveMarkersClick",g)}):"dragend"===a&&(k(function(){e.lat=i.getLatLng().lat,e.lng=i.getLatLng().lng}),e.message&&e.focus===!0&&i.openPopup()),k(function(){d.$broadcast(f,{markerName:g,leafletEvent:b})})}}var i=C(e);g.addLayer(i),e.focus===!0&&i.openPopup();for(var j=["click","dblclick","mousedown","mouseover","mouseout","contextmenu","dragstart","drag","dragend","move","remove","popupopen","popupclose"],l=0;l<j.length;l++){var m=j[l];i.on(m,h(m),{eventName:m,scope_watch_name:c})}var n=a.$watch(c,function(a,c){if(!a)return g.removeLayer(i),n(),void 0;if(c){if(void 0===a.draggable||null===a.draggable||a.draggable!==!0?void 0!==c.draggable&&null!==c.draggable&&c.draggable===!0&&i.dragging.disable():(void 0===c.draggable||null===c.draggable||c.draggable!==!0)&&i.dragging.enable(),void 0===a.message||null===a.message||"string"!=typeof a.message||""===a.message?void 0!==c.message&&null!==c.message&&"string"==typeof c.message&&""!==c.message&&(i.closePopup(),i.unbindPopup()):void 0===c.message||null===c.message||"string"!=typeof c.message||""===c.message?(i.bindPopup(a.message),a.focus===!0&&i.openPopup()):a.message!==c.message&&i.setPopupContent(a.message),void 0===a.focus||null===a.focus||a.focus!==!0?void 0!==c.focus&&null!==c.focus&&c.focus===!0&&i.closePopup():(void 0===c.focus||null===c.focus||c.focus!==!0)&&i.openPopup(),void 0===a.lat||null===a.lat||isNaN(a.lat)||"number"!=typeof a.lat||void 0===a.lng||null===a.lng||isNaN(a.lng)||"number"!=typeof a.lng)b.warn("There are problems with lat-lng data, please verify your marker model");else{var d=i.getLatLng();(d.lat!==a.lat||d.lng!==a.lng)&&i.setLatLng([a.lat,a.lng])}void 0===a.icon||null===a.icon||"object"!=typeof a.icon?void 0!==c.icon&&null!==c.icon&&"object"==typeof c.icon&&i.setIcon(new f):void 0===c.icon||null===c.icon||"object"!=typeof c.icon?i.setIcon(new f(a.icon)):JSON.stringify(a.icon)!==JSON.stringify(c.icon)&&i.setIcon(new f(a.icon))}},!0);return i}function C(a){var b=null;b=a.icon?a.icon:new f;var c=new L.marker(a,{icon:b,draggable:a.draggable?!0:!1});return a.message&&c.bindPopup(a.message),c}function D(){var c={};if(a.leaflet.paths=i.testing?c:g,a.paths){b.warn("[AngularJS - Leaflet] Creating polylines and adding them to the map will break the directive's scope's inspection in AngularJS Batarang");for(var d in a.paths)c[d]=E(d,a.paths[d],H);a.$watch("paths",function(a){for(var b in a)void 0===c[b]&&(c[b]=E(b,a[b],H));for(var d in c)void 0===a[d]&&delete c[d]},!0)}}function E(b,c,d){var f=new L.Polyline([],{weight:e.path.weight,color:e.path.color,opacity:e.path.opacity});if(void 0!==c.latlngs){var g=F(c.latlngs);f.setLatLngs(g)}void 0!==c.weight&&f.setStyle({weight:c.weight}),void 0!==c.color&&f.setStyle({color:c.color}),void 0!==c.opacity&&f.setStyle({opacity:c.opacity}),d.addLayer(f);var h=a.$watch("paths."+b,function(a,b){if(!a)return d.removeLayer(f),h(),void 0;if(b){if(void 0!==a.latlngs&&a.latlngs!==b.latlngs){var c=F(a.latlngs);f.setLatLngs(c)}void 0!==a.weight&&a.weight!==b.weight&&f.setStyle({weight:a.weight}),void 0!==a.color&&a.color!==b.color&&f.setStyle({color:a.color}),void 0!==a.opacity&&a.opacity!==b.opacity&&f.setStyle({opacity:a.opacity})}},!0);return f}function F(a){var b=a.filter(function(a){return!!a.lat&&!!a.lng}).map(function(a){return new L.LatLng(a.lat,a.lng)});return b}function G(){a.defaults&&a.defaults.zoomControlPosition&&H.zoomControl.setPosition(a.defaults.zoomControlPosition)}i.width&&h.css("width",i.width),i.height&&h.css("height",i.height),a.leaflet={},a.leaflet.maxZoom=i.defaults&&a.defaults&&a.defaults.maxZoom?parseInt(a.defaults.maxZoom,10):e.maxZoom,a.leaflet.minZoom=i.defaults&&a.defaults&&a.defaults.minZoom?parseInt(a.defaults.minZoom,10):e.minZoom,a.leaflet.doubleClickZoom=i.defaults&&a.defaults&&"boolean"==typeof a.defaults.doubleClickZoom?a.defaults.doubleClickZoom:e.doubleClickZoom,a.leaflet.scrollWheelZoom=i.defaults&&a.defaults&&"boolean"==typeof a.defaults.scrollWheelZoom?a.defaults.scrollWheelZoom:e.scrollWheelZoom;var H=new L.Map(h[0],{maxZoom:a.leaflet.maxZoom,minZoom:a.leaflet.minZoom,doubleClickZoom:a.leaflet.doubleClickZoom,scrollWheelZoom:a.leaflet.scrollWheelZoom}),I=null;H.setView([0,0],10),a.leaflet.map=i.testing?H:g,G(),n(),x(),u(),w(),z(),A(),D(),t(),l(),m(),y(),a.$on("leafletDirectiveSetMap",function(a,b){var c=b.shift();H[c].apply(H,b)})}}}]),angular.module("ngGeolocation",[]).constant("options",{}).factory("geolocation",["$q","$rootScope","options",function(a,b,c){return{position:function(){var d=a.defer();return navigator.geolocation.getCurrentPosition(function(a){b.$apply(function(){d.resolve(angular.copy(a))})},function(a){b.$apply(function(){d.reject(a)})},c),d.promise}}}]);